webpackJsonp([17],{"/8I9":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAwCAYAAABE1blzAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAMZSURBVGhD7ZpLTxNRGIbnz2jvRSNtaVFjMbrQYBQTExC1Ui/1gpCy0uhGWQhRYhFIAIEILSQUMMR/QNywcEHQVFqCCCYQalvohe3rOVMulZ5Km9BmTpnFkzTtnJn3mevpN5/Q3T0Ao+EsNGpLFphResKKwcERxGIxbG5uFoR4PI6R4XGS0ypmYGdLxQxDqRWdHR8gHD92GkqFAYqj2XOpsgbLy7+RSLADHTQrq6u4WnWTmSUzRpToT0FI/VKpMO6LSmGC7dZDBIN/CiYYjoRx1/4EKqWJmWkvqU47gnSww9EEl6sb7e2Z6etzY2bmGzNI/ohjdvY7+sm2WZm2odkfEAeVcldyR1CtKsPQkFc83xOJxL6wg+QPVoa90Owezyi5Bk3pghp1Gdxur7ggawM8QLMPD3tFF1mQR2RBWVDiHE5BraZ8S9CM0dFP3AuOj01CqzEnnVRmCC2v38F6phLV1Xfg8/1gDuSJubkAamvuiU6vXrZCiEaj8JMv19aCzAE8EgwGRdGNjSgE1gLFhCzIO7Ig7xxeQfrQpH8geYBmzTRBYQoGAvNocj6HyVQBo9EqbQwVuHjhGqamvjAl0wRjZI80N79JK95IGVoVvFHrQCgU/seFki4Yi6O11UUG0QpWcjAP3LY9RjichSBlcfEXXK5eca9cJ/M6KVNDcDpfYHr6a3anKIXWO5MXMLnR0JuN1CE5c7rJFBOyIO/IgrxT/IL0RebS0jIikQhzAR6JRNZFJ+omdLzvwflzV2CzPUJgfp45gCcWFn6irq5edGpr64RQoj8pzue0agu83smMD0weoNknJj5Dt1UK1eksu4Vf+n5QrmxLHFlQFpQ4smBRC+bSRsJaeSFgZUmFZs/YRkKbZxobnqK/342BAU9GPOQo+3x+cYWsEPnC7w+QozPGzLQNzd7Y+IzdCEShxRv64/9QK02w2+sRCoWIJDvMQbO+vgHH/Sbx1GNlSoU6pDoJel1yqpYLBW/GW1lF1eVcm/EM0OvKIbS97SIfspfUacvQ1dWHaLSw7ZS9PR9JTgszUxpHknItLS78Bfo0NHtYwi/ZAAAAAElFTkSuQmCC"},Hpkw:function(t,e){},wUZA:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("mvHQ"),s=o.n(a),n=(o("QmSG"),o("T4ej")),i=o("+n8h"),r=(o("dyDs"),{name:"homePage",components:{tabbar:i.a,loading:n.a},data:function(){return{infomsg:"",errormodal:!1,currentIndex:0,departmentsinfo:{},doctorType:[],singleDoctorList:[],appId:"",timestamp:"",nonceStr:"",signature:"",isshowloading:!1,isscan:!1,key1:"",value1:"",key2:"",value2:""}},created:function(){},beforeDestroy:function(){if(!localStorage.getItem("cardno")){var t=this.$store.getters.getUrl+"card/getAllCards.do",e=this,o=localStorage.getItem("openid");$.ajax({url:t,type:"post",dataType:"json",async:!1,data:{openid:o},success:function(t){t.data.length>0&&(localStorage.setItem("cardno",t.data[0].cardno),localStorage.setItem("cardername",t.data[0].name),e.$store.commit("setCardCode",t.data[0].cardno))},error:function(t){e.spinShow=!1,e.$Modal.error({title:"提示信息",content:"请求失败!"})}})}},mounted:function(){this.getDepartments()},methods:{tia:function(){this.$router.push("/consultadoctor")},fetchScanConfig:function(){wx.scanQRCode({desc:"scanQRCode desc",needResult:0,scanType:["qrCode","barCode"],success:function(t){t.resultStr}})},toAppointment:function(t){this.$router.push("/appointment?depCode="+t.deptcode+"&depname="+t.deptname+"&docName="+t.docname+"&docCode="+t.doccode)},selectItem:function(t){this.currentIndex!=t&&(this.searchdoctors(t),this.currentIndex=t)},searchdoctors:function(t){var e=this,o=e.$store.getters.getUrl+"depart/DepartDoctors.do",a=[];"妇科门诊"==e.doctorType[t].depname?a.push("100101"):"产科门诊"==e.doctorType[t].depname?a.push("100102"):"儿科门诊"==e.doctorType[t].depname?a.push("100103"):a.push(e.doctorType[t].depCode);for(var s,n="",i=0;i<a.length;i++)n+=a[i]+",";s=n.substring(0,n.lastIndexOf(",")),this.isshowloading=!0;var r=$.ajax({url:o,type:"post",dataType:"json",timeout:15e3,data:{depCode:s},success:function(t){e.isshowloading=!1,e.singleDoctorList=[];for(var o=t.data,a=0;a<o.length;a++)if(""!=o[a])for(var s=JSON.parse(o[a]),n=0;n<s.length;n++)e.singleDoctorList.push(s[n])},error:function(t){e.isshowloading=!1},complete:function(t,o){"timeout"==o&&(r.abort(),e.$Modal.warning({title:"友情提示",content:"请求超时"}))}});return e.singleDoctorList},_dealdata:function(t){this.doctorType=[],this.doctorType.push({depname:"妇科门诊",gynaecology:t.gynaecology}),this.doctorType.push({depname:"产科门诊",obstetrics:t.obstetrics}),this.doctorType.push({depname:"儿科门诊",pediatrics:t.pediatrics});for(var e=0;e<t.other.length;e++)"皮肤科"==t.other[e].depname&&this.doctorType.push({depname:"皮肤科",depCode:t.other[e].depCode});for(var o=0;o<t.other.length;o++){var a,s;if(a=t.other[o].depname,s=t.other[o].depCode,"皮肤科"!=a){var n={depname:a,depCode:s};this.doctorType.push(n)}}this.searchdoctors(0)},getDepartments:function(){var t=this.$store.getters.getUrl+"depart/GetRegDeptList.do",e=this;e.isshowloading=!0;var o=$.ajax({url:t,type:"post",dataType:"json",timeout:15e3,async:!0,data:"",success:function(t){e.isshowloading=!1,e._dealdata(t.data)},error:function(t){e.isshowloading=!1},complete:function(t,a){"timeout"==a&&(o.abort(),e.$Modal.warning({title:"友情提示",content:"请求超时"}))}})},isRegetstate:function(){localStorage.hasOwnProperty("openid")&&""!=localStorage.getItem("openid")&&"undefined"!==localStorage.getItem("openid")?this.isrunnext(localStorage.getItem("openid")):this.sendcode()},sendcode:function(){var t=this.$route.query;void 0!=t&&null!=t&&""!=t&&(localStorage.setItem("user",s()(t)),localStorage.setItem("openid",t.openid),this.isrunnext(t.openid))},isrunnext:function(t){var e=this,o=e.$store.getters.getUrl+"card/getCards.do",a=$.ajax({url:o,type:"post",dataType:"json",timeout:15e3,async:!0,data:{openid:t},success:function(t){!localStorage.getItem("cardno")&&t.data.length>0&&(localStorage.setItem("cardno",t.data[0].cardno),localStorage.setItem("cardername",t.data[0].name),e.$store.commit("setCardCode",t.data[0].cardno)),e.getDepartments()},error:function(t){e.$Message.success("请求失败"),e.isshowloading=!1},complete:function(t,o){"timeout"==o&&(a.abort(),e.$Modal.warning({title:"友情提示",content:"请求超时"}))}})}},activated:function(){var t=location.href,e=this.$store.getters.getUrl+"SweepCode.do",o=this,a=$.ajax({url:e,type:"post",dataType:"json",timeout:15e3,async:!0,data:{url:t},success:function(t){o.appId=t.appId,o.timestamp=t.timestamp,o.nonceStr=t.nonceStr,o.signature=t.signature,wx.config({debug:!1,appId:o.appId,timestamp:o.timestamp,nonceStr:o.nonceStr,signature:o.signature,jsApiList:["onMenuShareAppMessage","hideAllNonBaseMenuItem","onMenuShareTimeline","scanQRCode","chooseImage","startRecord","stopRecord","uploadVoice","downloadVoice","playVoice","translateVoice"]})},error:function(t){},complete:function(t,e){"timeout"==e&&(a.abort(),o.$Modal.warning({title:"友情提示",content:"请求超时"}))}}),s=this.$store.getters.getUrl;wx.ready(function(){wx.onMenuShareAppMessage({title:"滦平县妇幼保健院挂号缴费平台",desc:"滦平县妇幼保健院挂号缴费平台",link:t,imgUrl:s+"static/img/logo.18b2d33.jpg",success:function(t){}}),wx.onMenuShareTimeline({title:"滦平县妇幼保健院挂号缴费平台",link:t,imgUrl:s+"static/img/logo.18b2d33.jpg",success:function(){}}),wx.error(function(t){})})}}),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-wrapper"},[a("div",{staticClass:"home-page"},[a("div",{staticClass:"tittle",on:{click:function(e){return t.tia()}}},[t._v("滦平县妇幼保健院挂号平台")]),t._v(" "),a("div",{staticClass:"hospital-info"},[a("img",{staticClass:"logo-img",attrs:{src:o("4Uwr"),width:"50",height:"50",alt:""}}),t._v(" "),a("p",{staticClass:"h-name"},[t._v("滦平县妇幼保健院")]),t._v(" "),a("p",{staticClass:"other-info qr-code",on:{click:t.fetchScanConfig}},[t._v("\n        扫二维码即时挂号\n        "),a("img",{staticStyle:{position:"absolute",right:"8.33333vw",top:"7.33333vw"},attrs:{src:o("/8I9"),alt:"",width:"40"}})]),t._v(" "),a("p",{staticClass:"other-info"},[t._v("地址：滦平县滦平镇居安里56号")])]),t._v(" "),a("div",{staticClass:"doctor-list"},[a("div",{staticClass:"tab-list"},t._l(t.doctorType,function(e,o){return a("div",{key:o,staticClass:"tab-item",class:{activeItem:t.currentIndex==o},on:{click:function(e){return t.selectItem(o)}}},[t._v(t._s(e.depname))])}),0),t._v(" "),0!==t.singleDoctorList.length&&"undefine"!==t.singleDoctorList?a("div",{staticClass:"doctors"},t._l(t.singleDoctorList,function(e,s){return a("div",{key:s,staticClass:"doctor-item",on:{click:function(o){return t.toAppointment(e)}}},[a("img",{staticClass:"avatar",attrs:{src:o("HfaK"),width:"50",height:"50",alt:""}}),t._v(" "),a("div",{staticClass:"doctor-info"},[a("p",[t._v(t._s(e.docname))])])])}),0):t._e(),t._v(" "),0==t.singleDoctorList.length||"undefine"==t.singleDoctorList?a("div",{staticClass:"doctors"},[t._m(0)]):t._e()])]),t._v(" "),a("Modal",{attrs:{title:"提示"},model:{value:t.errormodal,callback:function(e){t.errormodal=e},expression:"errormodal"}},[a("p",[t._v(t._s(t.infomsg))])]),t._v(" "),a("tabbar",{staticClass:"pubtabbar"}),t._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:t.isshowloading,expression:"isshowloading"}],staticClass:"loading"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"doctor-info"},[e("p",[this._v("暂无号源")])])}]};var d=o("VU/8")(r,c,!1,function(t){o("Hpkw")},"data-v-02f37c86",null);e.default=d.exports}});