webpackJsonp([49],{Z0BI:function(t,e){},gusD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("bOdI"),o=s.n(i),a=s("mvHQ"),n=s.n(a),r=s("T4ej"),l=s("uGJ5"),c=o()({components:{loading:r.a},methods:{tobackdetail:function(){this.$router.push("/doctorckeck")}},data:function(){return{isshow:!1,delitem:null,delindex:0,tipmodal:!1,errormsg:"",erromodal:!1,testlist:[]}},created:function(){var t=this;setTimeout(function(){t.fetchtestlist();var e=t.$store.getters.getUrl+"SweepCode.do";Object(l.a)(e)},10)}},"methods",{tobackdetail:function(){this.$router.push("/doctorckeck")},newdate:function(){var t=new Date,e=t.getFullYear(),s=t.getMonth()+1,i=t.getDate();return s<10&&(s="0"+s),i<10&&(i="0"+i),e+"-"+s+"-"+i},isdelet:function(t,e){this.delitem=t.items[0],this.delindex=e,this.tipmodal=!0},delet:function(){var t=this,e=JSON.parse(localStorage.getItem("yspatientinfo")),s=this.delitem.serialno,i=e.patientid,o=e.registerdept,a=e.hosdocname,r=e.doctor,l=e.visitno,c=this.newdate(),d=e.clinicno,u=t.$store.getters.getUrl+"chemicalexam/delAssayItem.do";t.isshow=!0;var m={serialno:s,cardno:i,reqdept:o,docname:a,doccode:r,visitno:l,visitdate:c,clinicno:d},v=$.ajax({url:u,type:"post",dataType:"json",timeout:15e3,async:!0,contentType:"application/json",data:n()(m),success:function(e){t.isshow=!1,1==e.status?(t.$Message.info("撤销成功！"),t.testlist.splice(t.delindex,1)):(t.errormsg="撤销数据失败！",t.erromodal=!0)},error:function(e){t.isshow=!1,t.errormsg="撤销化验请求发送失败!",t.erromodal=!0},complete:function(e,s){"timeout"==s&&(v.abort(),t.$Modal.warning({title:"友情提示",content:"请求超时"}))}})},dealtestresult:function(t){for(var e=[],s=0;s<t.length;s++){e.includes(t[s].serialno)||e.push(t[s].serialno)}for(var i=[],o=0;o<e.length;o++)i.push({serialno:e[o],items:[]});for(var a=0;a<t.length;a++){i[e.indexOf(t[a].serialno)].items.push(t[a])}this.testlist=i},fetchtestlist:function(){var t=this,e=t.$store.getters.getUrl+"chemicalexam/getBeforeOneAssayNoPay.do",s=JSON.parse(localStorage.getItem("yspatientinfo")),i=s.registerdept,o=s.doctor,a=s.patientid;t.isshow=!0;var n=$.ajax({url:e,type:"post",dataType:"json",timeout:15e3,async:!0,data:{cardno:a,doctorcode:o,reqdeptcode:i},success:function(e){t.isshow=!1,"1"==e.status?t.dealtestresult(e.data):"0"!=e.status&&(t.errormsg="数据查询失败！",t.erromodal=!0)},error:function(e){t.isshow=!1,t.errormsg="请求发送失败!",t.erromodal=!0},complete:function(e,s){"timeout"==s&&(n.abort(),t.$Modal.warning({title:"友情提示",content:"请求超时"}))}})}}),d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"doctorckecktest"},[s("div",{staticClass:"title"},[s("div",{staticClass:"arrow-icon",on:{click:t.tobackdetail}},[s("Icon",{attrs:{size:"30",type:"ios-arrow-back"}})],1),t._v("\n    化验信息\n  ")]),t._v(" "),0==t.testlist.length?s("div",{staticClass:"tipinfo"},[t._v("\n      暂无数据\n  ")]):t._e(),t._v(" "),t.testlist.length>0?s("div",t._l(t.testlist,function(e,i){return s("div",{key:i,staticClass:"items"},[t._l(e.items,function(e,i){return s("div",{key:i},[s("div",{staticClass:"item"},[s("div",{staticClass:"itemname"},[t._v("项目名称")]),t._v(" "),s("div",{staticStyle:{flex:"1","text-align":"right",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(e.itemname))])]),t._v(" "),s("div",{staticClass:"item"},[s("div",{staticClass:"itemname"},[t._v("费用")]),t._v(" "),s("div",{staticStyle:{"text-align":"right",flex:"1"}},[t._v(t._s(e.costs)+"元")])])])}),t._v(" "),s("div",{staticClass:"btn"},[s("div",{on:{click:function(s){return t.isdelet(e,i)}}},[t._v("撤销")])])],2)}),0):t._e(),t._v(" "),s("Modal",{attrs:{title:"提示"},model:{value:t.erromodal,callback:function(e){t.erromodal=e},expression:"erromodal"}},[s("p",[t._v(t._s(t.errormsg))])]),t._v(" "),s("Modal",{attrs:{title:"提示"},on:{"on-ok":function(e){return t.delet()}},model:{value:t.tipmodal,callback:function(e){t.tipmodal=e},expression:"tipmodal"}},[s("p",[t._v("是否撤销此订单？")])]),t._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}]})],1)},staticRenderFns:[]};var u=s("VU/8")(c,d,!1,function(t){s("Z0BI")},"data-v-5523eeea",null);e.default=u.exports}});