webpackJsonp([51],{"7PQG":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),i=a.n(s),n=a("T4ej"),o=a("uGJ5"),r=new Date;r.getFullYear();if(r.getMonth()+1<10)r.getMonth();else r.getMonth();if(r.getDate()<10)r.getDate();else r.getDate();var c={components:{loading:n.a},data:function(){return{value1:r,HistoricpatientsList:1,isshow:!1,size:15,tabstatu:!0}},methods:{changetabstatu:function(t){t!=this.tabstatu&&(t||this.$router.push("/registeredlist"),this.tabstatu=!this.tabstatu)},tobackdetail:function(){this.$router.push("/Personalcenter")},datatime:function(t){var e=t,a=this.p(e.getFullYear()),s=this.p(e.getMonth()+1);this.p(e.getDate());return a+"-"+s},p:function(t){return t<10?"0"+t:t},qingkong:function(){},Querypatients:function(){var t=this,e=t.$store.getters.getUrl+"HistoricPatients/getPatientRegisHistoryInfo.do",a=localStorage.getItem("ysdoccode"),s=t.datatime(t.value1)+","+t.size;t.isshow=!0;var i=$.ajax({url:e,type:"post",timeout:15e3,dataType:"json",data:{doctorno:a,visitdate:s},success:function(e){t.isshow=!1,t.HistoricpatientsList=[],1==e.status?t.HistoricpatientsList=e.data:0==e.status?t.HistoricpatientsList=[]:-1==e.status&&t.$Modal.error({title:"提示信息",content:"请求异常!"})},error:function(e){t.isshow=!1,t.$Modal.error({title:"提示信息",content:"请求失败!"})},complete:function(e,a){"timeout"==a&&(i.abort(),t.$Modal.warning({title:"友情提示",content:"请求超时"}))}})},todetail:function(t){var e=i()(t);void 0!=e&&null!=e&&""!=e&&void 0!=t&&null!=t&&""!=t&&(localStorage.setItem("yspatientinfo",e),localStorage.setItem("cardno",t.patientid),localStorage.setItem("tiao",0),this.$router.push("/doctorckeck"))},datatransss:function(t){var e=new Date(t),a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate(),n=e.getHours(),o=e.getMinutes();s<10&&(s="0"+s),i<10&&(i="0"+i),n<10&&(n="0"+n),o<10&&(o="0"+o);var r=a+"-"+s+"-"+i;return"NaN-NaN-NaN"!==r?r:""}},mounted:function(){var t=this,e=document.querySelector(".his"),a=e.offsetHeight;setInterval(function(){e.onscroll=function(){var s=e.scrollTop,i=e.scrollHeight;a+s-i>=-1&&(t.size+=10,t.Querypatients())}},1e3),t.Querypatients();var s=t.$store.getters.getUrl+"SweepCode.do";Object(o.a)(s)}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"his",staticStyle:{height:"100%",overflow:"auto","-webkit-overflow-scrolling":"touch"}},[s("div",{staticClass:"tittle",staticStyle:{background:"rgb(0, 187, 187)",color:"white"}},[s("div",{staticClass:"arrow-icon",on:{click:t.tobackdetail}},[s("Icon",{attrs:{size:"30",type:"ios-arrow-back"}})],1),t._v("\n         挂号患者列表\n    ")]),t._v(" "),s("div",{staticClass:"btn-warapper"},[s("div",{class:{active:!t.tabstatu,disactive:t.tabstatu},on:{click:function(e){return t.changetabstatu(!1)}}},[t._v("待就诊")]),t._v(" "),s("div",{class:{active:t.tabstatu,disactive:!t.tabstatu},on:{click:function(e){return t.changetabstatu(!0)}}},[t._v("已就诊")])]),t._v(" "),t.tabstatu?s("div",{staticClass:"xuanze",staticStyle:{position:"relative"}},[s("div",{staticStyle:{display:"inline-block",width:"100%"}},[s("span",{staticStyle:{color:"rgb(0, 187, 187)","font-size":"20px"},on:{click:t.qingkong}},[t._v("全部患者")]),t._v(" "),s("el-date-picker",{staticStyle:{width:"35%",border:"0",position:"absolute",right:"5%",top:"7px"},attrs:{type:"month",placeholder:"选择月份",editable:!1,clearable:!0,size:"small"},on:{change:t.Querypatients},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1)]):t._e(),t._v(" "),t.HistoricpatientsList.length>0?s("div",{staticClass:"content"},t._l(t.HistoricpatientsList,function(e,i){return s("div",{key:i,staticClass:"list-item",on:{click:function(a){return t.todetail(e)}}},[s("div",{staticClass:"patient-info"},[s("img",{staticClass:"avatar",attrs:{src:a("/1rS"),width:"50",alt:""}}),t._v(" "),s("div",{staticClass:"user item-name"},[s("p",[s("span",[t._v("姓名：")]),s("span",[t._v(t._s(e.name))])]),t._v(" "),s("p",[s("span",[t._v("卡号：")]),s("span",[t._v(t._s(e.patientid))])])]),t._v(" "),s("p",{staticClass:"poop"},[t._v(t._s(t.datatransss(e.visitdate)))])])])}),0):t._e(),t._v(" "),t.HistoricpatientsList.length<=0?s("div",{staticClass:"content"},[s("p",{staticStyle:{"text-align":"center","font-size":"20px",padding:"40px 0"}},[t._v("暂无数据")])]):t._e(),t._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"load"})],1)},staticRenderFns:[]};var u=a("VU/8")(c,l,!1,function(t){a("ldqD")},"data-v-545954c7",null);e.default=u.exports},ldqD:function(t,e){}});