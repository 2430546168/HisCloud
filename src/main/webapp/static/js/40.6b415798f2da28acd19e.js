webpackJsonp([40],{"4Wvp":function(t,e){},dqOD:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("+n8h"),i=s("T4ej"),o=(s("dyDs"),{name:"appointment",components:{loading:i.a,tabbar:a.a},data:function(){return{doctor:[],pmstate:"",spinShow:!1,docxiang:[],jiajie:"",RegID:"",play:!1,time:[],title:"",haoyuan:[],job:"",numeer:1}},created:function(){this.tab(7)},mounted:function(){this.spinShow=!0,this.getdoctorinfo(),this.doctorxinxi();var t=document.getElementsByClassName("xuanqi");t[0].style.background="rgba(40, 184, 161, 1)",t[0].style.color="#fff",this.xuanzeriq(0)},beforeDestroy:function(){if(!localStorage.getItem("cardno")){var t=this.$store.getters.getUrl+"card/getAllCards.do",e=this,s=localStorage.getItem("openid");$.ajax({url:t,type:"post",dataType:"json",async:!1,data:{openid:s},success:function(t){t.data.length>0&&(localStorage.setItem("cardno",t.data[0].cardno),localStorage.setItem("cardername",t.data[0].name),e.$store.commit("setCardCode",t.data[0].cardno))},error:function(t){e.spinShow=!1,e.$Modal.error({title:"提示信息",content:"请求失败!"})}})}},methods:{tab:function(t){for(var e=new Date,s=[e],a=[],i=0;i<t;i++)s.push(new Date(e.getFullYear(),e.getMonth(),e.getDate()+i));for(i=0;i<s.length;i++){var o=s[i].getFullYear(),n=s[i].getMonth()+1;n<10&&(n="0"+n);var r=s[i].getDate();r<10&&(r="0"+r);s[i].getHours(),s[i].getMinutes();var c=new Array("周日","周一","周二","周三","周四","周五","周六")[s[i].getDay()];a.push({times:o+"-"+n+"-"+r,week:c})}a.shift(),a[0].week="今日",this.time=a},xuanzeriq:function(t){for(var e=document.getElementsByClassName("xuanqi"),s=0;s<e.length;s++)e[s].style.background="#fff",e[s].style.color="#000";e[t].style.background="rgba(40, 184, 161, 1)",e[t].style.color="#fff",this.savedoctorinfo(t)},disp:function(){this.play=!this.play},tobackdetail:function(){this.$router.push("/home")},getcurrentday:function(t){var e=new Date(t),s=e.getFullYear();if(e.getMonth()+1<10)var a="0"+(e.getMonth()+1);else a=e.getMonth()+1;if(e.getDate()<10)var i="0"+e.getDate();else i=e.getDate();return s+"-"+a+"-"+i},amRegistered:function(){"约满"!=this.pmstate&&"暂无号源"!=this.pmstate?this.pandun():this.$Modal.info({title:"提示信息",content:"暂无号源!"})},pandun:function(){null==this.$store.getters.getDoccode||"null"==this.$store.getters.getDoccode||void 0==this.$store.getters.getDoccode||null==this.$store.getters.getDepname||"null"==this.$store.getters.getDepname||void 0==this.$store.getters.getDepname||null==this.$store.getters.getdepCode||"null"==this.$store.getters.getdepCode||void 0==this.$store.getters.getdepCode||null==this.$store.getters.getDocName||"null"==this.$store.getters.getDocName||void 0==this.$store.getters.getDocName?(this.$Modal.warning({title:"友情提示",content:"获取信息异常，请重新获取"}),this.$router.push("/home")):this.$router.push("/registeredInfo")},savedoctorinfo:function(t){for(var e=this,s=e.time[t].times,a="",i=0;i<e.haoyuan.length;i++)e.getcurrentday(e.haoyuan[i].clinicdate)==s&&(a=e.haoyuan[i]);""!==a?(e.$store.commit("setRegdata",e.getcurrentday(a.clinicdate)),-1!==a.cliniclabel.indexOf(e.$store.getters.getDocName)&&(1,e.$store.commit("setRegprice",a.price),e.$store.commit("setRegcode",a.cliniclabel),e.$store.commit("setamprom",a.amorpm),e.pmstate="未约满")):e.pmstate="暂无号源";if(1==e.numeer){e.numeer=0;var o=location.href,n=this.$store.getters.getUrl+"SweepCode.do",r=$.ajax({url:n,type:"post",dataType:"json",async:!0,timeout:15e3,data:{url:o},success:function(t){wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["onMenuShareAppMessage","hideAllNonBaseMenuItem","onMenuShareTimeline"]})},error:function(t){},complete:function(t,s){"timeout"==s&&(r.abort(),e.$Modal.warning({title:"友情提示",content:"请求超时"}))}}),c=location.href,l=a.cliniclabel,d=this.$store.getters.getUrl;wx.ready(function(){wx.onMenuShareAppMessage({title:"滦平县妇幼保健院挂号缴费平台",desc:l,link:c,imgUrl:d+"static/img/logo.18b2d33.jpg",success:function(t){}}),wx.onMenuShareTimeline({title:"滦平县妇幼保健院挂号缴费平台",link:c,imgUrl:d+"static/img/logo.18b2d33.jpg",success:function(){}}),wx.error(function(t){})})}},getdoctorinfo:function(){var t=this,e=t.$store.getters.getUrl+"doctors/getDocSches.do",s=t.$store.getters.getDoccode,a=t.$store.getters.getdepCode,i=$.ajax({url:e,type:"post",dataType:"json",async:!1,timeout:15e3,data:{doccode:s,departid:a},success:function(e){t.spinShow=!1,1==e.status&&(t.haoyuan=e.data)},error:function(e){t.spinShow=!1},complete:function(t,e){"timeout"==e&&(i.abort(),_this.$Modal.warning({title:"友情提示",content:"请求超时"}))}})},doctorxinxi:function(){var t=this,e=t.$store.getters.getUrl+"doctors/getdoctor.do",s=t.$store.getters.getDoccode,a=$.ajax({url:e,type:"post",dataType:"json",timeout:15e3,data:{doccode:s},success:function(e){t.isshowloading=!1,t.docxiang=e.data,t.title=t.docxiang[0].title,t.job=t.docxiang[0].job,void 0!==e.data[0].expertjob?t.jiajie=e.data[0].expertjob:t.jiajie="无"},error:function(t){},complete:function(e,s){"timeout"==s&&(a.abort(),t.$Modal.warning({title:"友情提示",content:"请求超时"}))}})}}}),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-page"},[a("div",{staticClass:"appointmentPage"},[a("div",{staticClass:"tittle"},[a("div",{staticClass:"arrow-icon",on:{click:t.tobackdetail}},[a("Icon",{attrs:{size:"30",type:"ios-arrow-back"}})],1),t._v("\n      滦平县妇幼保健院挂号平台\n    ")]),t._v(" "),a("div",{staticClass:"doctorInfo"},[a("div",{staticClass:"otherinfo"},[a("p",{staticClass:"otherinfo-title"},[t._v("医生姓名：")]),t._v(" "),a("p",{staticClass:"otherinfo-text"},[t._v(t._s(this.$store.getters.getDocName))])]),t._v(" "),a("div",{staticClass:"otherinfo"},[a("p",{staticClass:"otherinfo-title"},[t._v("门诊科室：")]),t._v(" "),a("p",{staticClass:"otherinfo-text"},[t._v(t._s(this.$store.getters.getDepname))])]),t._v(" "),a("div",{staticClass:"otherinfo"},[a("p",{staticClass:"otherinfo-title"},[t._v("医生职位：")]),t._v(" "),a("p",{staticClass:"otherinfo-text"},[t._v(t._s(t.job))])]),t._v(" "),a("div",{staticClass:"otherinfo"},[a("p",{staticClass:"otherinfo-title"},[t._v("医生职称：")]),t._v(" "),a("p",{staticClass:"otherinfo-text"},[t._v(t._s(t.title))])]),t._v(" "),a("Poptip",{staticClass:"avatar",attrs:{placement:"bottom-start",width:"300"}},[a("img",{staticClass:"avatar1",attrs:{src:s("HfaK"),alt:""}}),t._v(" "),a("div",{staticClass:"api",attrs:{slot:"content"},slot:"content"},t._l(t.docxiang,function(e,i){return a("div",{key:i},[a("img",{staticStyle:{"vertical-align":"top","z-index":"999"},attrs:{src:s("HfaK"),alt:"",width:"50px;"}}),t._v(" "),a("div",{staticClass:"po",staticStyle:{"vertical-align":"top"}},[a("p",[a("span",[t._v("医生姓名：")]),a("span",[t._v(t._s(e.name))])]),t._v(" "),a("p",[a("span",[t._v("医生编码：")]),a("span",[t._v(t._s(e.username))])]),t._v(" "),a("p",[a("span",[t._v("医生职位：")]),a("span",[t._v(t._s(e.job))])]),t._v(" "),a("p",[a("span",[t._v("医生职称：")]),a("span",[t._v(t._s(e.title))])])])])}),0)])],1),t._v(" "),t.play?t._e():a("div",{staticClass:"otherinfo1",staticStyle:{"border-bottom":"1px solid rgba(187, 187, 187, 1)",padding:"0 18px 18px 18px"}},[a("span",{staticClass:"otherinfo-title",staticStyle:{"padding-left":"16.8333vw",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"1",overflow:"hidden"},on:{click:t.disp}},[t._v("医生简介："+t._s(t.jiajie))])]),t._v(" "),t.play?a("div",{staticClass:"otherinfo1",staticStyle:{"border-bottom":"1px solid rgba(187, 187, 187, 1)",padding:"0 18px 18px 18px"},on:{click:t.disp}},[a("span",{staticClass:"otherinfo-title",staticStyle:{"padding-left":"16.3333vw"}},[t._v("医生简介：")]),t._v(" "),a("span",{staticClass:"otherinfo-text"},[t._v(t._s(t.jiajie))])]):t._e(),t._v(" "),a("div",{staticClass:"divid-line"}),t._v(" "),a("div",{staticClass:"select-table"},[a("div",{staticClass:"zhou"},t._l(t.time,function(e,s){return a("div",{key:s,staticClass:"xuanqi",on:{click:function(e){return t.xuanzeriq(s)}}},[a("p",[t._v(t._s(e.week))]),t._v(" "),a("p",[t._v(t._s(e.times.substring(e.times.length-5,e.times.length)))])])}),0),t._v(" "),a("p",{staticClass:"select-item item-color",class:{pmstate:"暂无号源"==t.pmstate}},[t._v("剩余号源："+t._s(t.pmstate))]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{padding:"0 20px",margin:"20px 0px",flex:"1"}},["未约满"==t.pmstate?a("Button",{attrs:{size:"large",type:"primary",long:""},on:{click:function(e){return t.amRegistered()}}},[t._v("预约")]):t._e(),t._v(" "),"暂无号源"==t.pmstate?a("Button",{attrs:{disabled:!0,size:"large",type:"primary",long:""}},[t._v("预约")]):t._e()],1),t._v(" "),a("p",{staticStyle:{padding:"0 20px",margin:"20px 0px",flex:"1"}},[a("Button",{attrs:{disabled:!0,size:"large",type:"primary",long:""},on:{click:function(e){return t.amRegistered()}}},[t._v("复诊")])],1)])])]),t._v(" "),a("tabbar",{staticClass:"pubtabbar"}),t._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:t.spinShow,expression:"spinShow"}]})],1)},staticRenderFns:[]};var r=s("VU/8")(o,n,!1,function(t){s("4Wvp")},"data-v-67251f7a",null);e.default=r.exports}});