webpackJsonp([52],{IAz4:function(t,e){},NhCJ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("bOdI"),s=i.n(o),a=i("mvHQ"),n=i.n(a),r=i("T4ej"),c=i("uGJ5"),l=s()({components:{loading:r.a},methods:{tobackdetail:function(){this.$router.push("/doctorckeck")}},data:function(){return{isshow:!0,delitem:null,delindex:0,tipmodal:!1,errormsg:"",erromodal:!1,checklist:[]}},created:function(){var t=this;setTimeout(function(){t.fetchchecklist();var e=t.$store.getters.getUrl+"SweepCode.do";Object(c.a)(e)})}},"methods",{tobackdetail:function(){this.$router.push("/doctorckeck")},newdate:function(){var t=new Date,e=t.getFullYear(),i=t.getMonth()+1,o=t.getDate();return i<10&&(i="0"+i),o<10&&(o="0"+o),e+"-"+i+"-"+o},isdelet:function(t,e){this.delitem=t.items[0],this.delindex=e,this.tipmodal=!0},delet:function(){var t=this,e=JSON.parse(localStorage.getItem("yspatientinfo")),i=this.delitem.serialno,o=e.patientid,s=e.registerdept,a=e.hosdocname,r=e.doctor,c=e.visitno,l=this.newdate(),d=e.clinicno,u=t.$store.getters.getUrl+"check/delCheckItem.do";t.isshow=!0;var h={serialno:i,cardno:o,reqdept:s,reqphysician:a,doctoruser:r,visitno:c,visitdate:l,clinicno:d},v=$.ajax({url:u,type:"post",dataType:"json",timeout:15e3,async:!0,contentType:"application/json",data:n()(h),success:function(e){t.isshow=!1,1==e.status?(t.$Message.info("撤销成功！"),t.checklist.splice(t.delindex,1)):(t.errormsg="撤销数据失败！",t.erromodal=!0)},error:function(e){t.isshow=!1,t.errormsg="撤销检查请求发送失败!",t.erromodal=!0},complete:function(e,i){"timeout"==i&&(v.abort(),t.$Modal.warning({title:"友情提示",content:"请求超时"}))}})},dealcheckresult:function(t){for(var e=[],i=0;i<t.length;i++){e.includes(t[i].serialno)||e.push(t[i].serialno)}for(var o=[],s=0;s<e.length;s++)o.push({serialno:e[s],items:[]});for(var a=0;a<t.length;a++){o[e.indexOf(t[a].serialno)].items.push(t[a])}this.checklist=o},fetchchecklist:function(){var t=this,e=t.$store.getters.getUrl+"check/getBeforeOneCheckNoPay.do",i=JSON.parse(localStorage.getItem("yspatientinfo")),o=i.registerdept,s=i.doctor,a=i.patientid;t.isshow=!0;var n=$.ajax({url:e,type:"post",dataType:"json",timeout:15e3,async:!0,data:{cardno:a,doctorcode:s,reqdeptcode:o},success:function(e){t.isshow=!1,"1"==e.status?t.dealcheckresult(e.data):"0"!=e.status&&(t.errormsg="数据查询失败！",t.erromodal=!0)},error:function(e){t.isshow=!1,t.errormsg="请求发送失败!",t.erromodal=!0},complete:function(e,i){"timeout"==i&&(n.abort(),t.$Modal.warning({title:"友情提示",content:"请求超时"}))}})}}),d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"doctorcheckjc"},[i("div",{staticClass:"title"},[i("div",{staticClass:"arrow-icon",on:{click:t.tobackdetail}},[i("Icon",{attrs:{size:"30",type:"ios-arrow-back"}})],1),t._v("\n    患者检查信息\n  ")]),t._v(" "),0==t.checklist.length?i("div",{staticClass:"tipinfo"},[t._v("\n      暂无数据\n  ")]):t._e(),t._v(" "),t.checklist.length>0?i("div",t._l(t.checklist,function(e,o){return i("div",{key:o,staticClass:"items"},[t._l(e.items,function(e,o){return i("div",{key:o},[i("div",{staticClass:"item"},[i("div",{staticClass:"itemname"},[t._v("项目名称")]),t._v(" "),i("div",{staticStyle:{flex:"1","text-align":"right",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(e.itemname))])]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"itemname"},[t._v("费用")]),t._v(" "),i("div",{staticStyle:{"text-align":"right",flex:"1"}},[t._v(t._s(e.costs)+"元")])])])}),t._v(" "),i("div",{staticClass:"btn"},[i("div",{on:{click:function(i){return t.isdelet(e,o)}}},[t._v("撤销")])])],2)}),0):t._e(),t._v(" "),i("Modal",{attrs:{title:"提示"},model:{value:t.erromodal,callback:function(e){t.erromodal=e},expression:"erromodal"}},[i("p",[t._v(t._s(t.errormsg))])]),t._v(" "),i("Modal",{attrs:{title:"提示"},on:{"on-ok":function(e){return t.delet()}},model:{value:t.tipmodal,callback:function(e){t.tipmodal=e},expression:"tipmodal"}},[i("p",[t._v("是否撤销此订单？")])]),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"load"})],1)},staticRenderFns:[]};var u=i("VU/8")(l,d,!1,function(t){i("IAz4")},"data-v-5074f901",null);e.default=u.exports}});