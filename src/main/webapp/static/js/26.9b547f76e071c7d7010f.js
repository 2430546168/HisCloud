webpackJsonp([26],{"0hsi":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("pFYg"),r=s.n(i),n=s("Xxa5"),a=s.n(n),o=s("exGp"),c=s.n(o),d=s("//Fk"),u=s.n(d),l=s("mvHQ"),p=s.n(l),f=s("woOf"),h=s.n(f),m={components:{loading:s("T4ej").a},data:function(){return{requestmodel:!1,infomsg:"",isfetchdrugs:!1,isinsertprescribe:!1,opacity:1,isshowtip:!1,deldrugindex:!1,isshowall:!1,currentdrugindex:-1,isshowdrugs:!1,isshowloading:!1,modal11:!1,searchdrugs:[],searchdrugses:[],drugNamees:"",defaultchannel:"",channel:[],frequency:[],modal1:!1,drugName:"",searchdruglist:[],east:{administretion:"水煎服",frequency:"",freq:"",repetition:"",abidance:""},form:{visitno:"",clinicno:"",name:"",cardno:"",orderby:"",depname:"",docname:"",doccode:"",openid:"",starttime:"",nizhen:"",itemclass:"B",orderclass:"B",sumcharges:"",outs:[]},procjectid:"",doctorno:""}},mounted:function(){var e=this;e.isshowloading=!0,setTimeout(function(){e.initdata(),e.getcurrentdayrecord(),e.init()},10)},methods:{initdata:function(){this.isfetchdrugs=!1,this.isinsertprescribe=!1,this.opacity=1,this.isshowtip=!1,this.deldrugindex=!1,this.isshowall=!1,this.currentdrugindex=-1,this.isshowdrugs=!1,this.isshowloading=!1,this.searchdrugs=[],this.searchdrugses=[],this.defaultchannel="",this.channel=[],this.frequency=[],this.modal1=!1,this.drugName="",this.searchdruglist=[],this.east.administretion="水煎服",this.east.frequency="",this.east.freq="",this.east.repetition="",this.east.abidance="",this.form.visitno="",this.form.clinicno="",this.form.name="",this.form.cardno="",this.form.orderby="",this.form.depname="",this.form.docname="",this.form.doccode="",this.form.openid="",this.form.starttime="",this.form.nizhen="",this.form.itemclass="B",this.form.orderclass="B",this.form.sumcharges="",this.form.outs=[]},inputLoseFocus:function(){setTimeout(function(){window.scrollTo(0,0)},100)},getcurrentdayrecord:function(){var e=this,t=JSON.parse(localStorage.getItem("yspatientinfo")),s=t.patientid,i=t.visitno,r=new Date,n=r.getFullYear(),a=r.getMonth()+1,o=r.getDate();a<10&&(a="0"+a),o<10&&(o="0"+o);var c=n+"-"+a+"-"+o,d=t.doctor,u=e.$store.getters.getUrl+"medicalrecord/getthesamedayoutpmr.do",l=$.ajax({url:u,type:"post",dataType:"json",timeout:15e3,async:!0,data:{patientid:s,visitdate:c,doccode:d,visitno:i},success:function(t){e.isshowloading=!1,1==t.status?e.form.nizhen=t.data[0].diagdesc:-1==t.status?e.$router.push("/abnormal"):(e.requestmodel=!0,e.infomsg="获取数据失败")},error:function(t){e.isshowloading=!1,e.requestmodel=!0,e.infomsg="请求发送失败"},complete:function(t,s){"timeout"==s&&(l.abort(),e.$Modal.warning({title:"友情提示",content:"请求超时"}))}})},toinsertprescribe:function(){this.isinsertprescribe=!0},touchstart:function(){this.opacity=.5},touchend:function(){this.opacity=1},deletoutsitem:function(){this.form.outs.splice(this.deldrugindex,1);for(var e=this.form.outs,t=0,s=0;s<e.length;s++)t+=e[s].charges;t=parseInt(100*t)/100,this.form.sumcharges=t},isdeletitem:function(e){this.deldrugindex=e,this.isshowtip=!0},editdrugdetail:function(e){"-1"==e?this.isshowall=!0:(this.isshowall=!1,this.currentdrugindex=e),this.isshowdrugs=!0},topath:function(){},sumprice:function(){var e=void 0;"一日一次"==this.east.frequency?e=1:"一日二次"==this.east.frequency?e=2:"一日三次"==this.east.frequency?e=3:"一日四次"==this.east.frequency?e=4:"一日五次"==this.east.frequency?e=5:"一日六次"==this.east.frequency&&(e=6);var t=void 0;"一日一次"==this.east.freq?t=1:"一日二次"==this.east.freq?t=2:"一日三次"==this.east.freq?t=3:"一日四次"==this.east.freq?t=4:"一日五次"==this.east.freq?t=5:"一日六次"==this.east.freq&&(t=6);for(var s=0;s<this.form.outs.length;s++){var i=this.form.outs[s].price.toString().split("."),r=i[1].length,n=0;if(0==i[0]){var a=this.form.outs[s].price*Math.pow(10,r);n=parseInt(a)}else n=this.form.outs[s].price*Math.pow(10,r);this.form.outs[s].charges=parseInt(this.east.repetition)*parseInt(this.form.outs[s].dosAge)*n/Math.pow(10,r),this.form.outs[s].costs=parseInt(this.east.repetition)*parseInt(this.form.outs[s].dosAge)*n/Math.pow(10,r),this.form.outs[s].amount=parseInt(this.form.outs[s].dosAge)*parseInt(this.east.repetition);var o;o=Math.ceil(this.east.repetition*t/e),this.east.abidance=o,h()(this.form.outs[s],this.east)}for(var c=this.form.outs,d=0,u=0;u<c.length;u++)d+=c[u].charges;d=parseInt(100*d)/100,this.form.sumcharges=d},checkouts:function(e){for(var t=!1,s=0;s<e.length;s++)for(var i in e[s]){if(""===e[s][i])return this.styleindex=s,this.$Message.warning("请把信息填写完整！"),t=!1,!1;t=!0}return t},insertprescribe:function(){var e=this;if(this.sumprice(),e.checkouts(e.form.outs)){var t=p()(e.form.outs),s={};s.outs=t,s.name=e.form.name,s.cardno=e.form.cardno,s.clinicno=e.form.clinicno,s.visitno=e.form.visitno,s.orderby=e.form.orderby,s.docname=e.form.docname,s.doccode=e.form.doccode,s.sumcharges=e.form.sumcharges,s.itemclass=e.form.itemclass,s.orderclass=e.form.orderclass,s.depname=e.form.depname,s.nizhen=e.form.nizhen;var i=e.$store.getters.getUrl+"prescription/prescribe.do?openid="+e.form.openid+"&starttime="+e.form.starttime;e.isshowloading=!0;var r=$.ajax({url:i,type:"post",dataType:"json",timeout:15e3,async:!0,contentType:"application/json",data:p()(s),success:function(t){e.isshowloading=!1,"1"===t.status?(e.$Message.info("开方成功"),e.initdata(),e.getcurrentdayrecord(),e.init(),window.websocketobj.send(p()({cardno:e.form.cardno,massege:"123"}))):(e.isshowloading=!1,e.requestmodel=!0,e.infomsg="开方失败")},error:function(t){e.isshowloading=!1,e.requestmodel=!0,e.infomsg="请求发送失败"},complete:function(t,s){"timeout"==s&&(r.abort(),e.$Modal.warning({title:"友情提示",content:"请求超时"}))}})}},getfirmid:function(e){var t=this,s=e.drugspec,i=e.ypcode,r=t.$store.getters.getUrl+"prescription/specification.do";return t.isshowloading=!0,new u.a(function(e,n){$.ajax({url:r,type:"post",dataType:"json",async:!1,data:{itemcode:i,itemspec:s},success:function(s){t.isshowloading=!1,e(s)},error:function(s){t.isshowloading=!1,e({status:5})}})})},adddrug1:function(e){var t=this;return c()(a.a.mark(function s(){var i,r;return a.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return(i={drugCode:"",drugName:"",drugSpec:"",firmId:"",units:"",dispensary:"",dispensarySub:"",price:"",dosAgeUnits:"",dosAge:null,administretion:"",frequency:"",repetition:1,amount:"",abidance:"",charges:"",costs:"",orderNo:"1",subOrderNo:"1",freqDetail:"医嘱说明",freq:""}).drugCode=e.ypcode,i.drugName=e.ypname,i.drugSpec=e.drugspec,i.units=e.unit,i.dispensary=e.storagecode,i.dispensarySub=e.substorage,0===e.ypprice.toString().indexOf(".")?i.price="0"+e.ypprice:i.price=e.ypprice,s.next=10,t.getfirmid(e);case 10:"1"==(r=s.sent).status?(i.firmId=r.data[0].firm_id,i.drugSpec=r.data[0].drug_spec+r.data[0].drug_supplier_id):"0"==r.status?(_this.requestmodel=!0,_this.infomsg="暂无数据"):"-1"==fetchfirmiddata.status?(_this.requestmodel=!0,_this.infomsg="系统异常查询药库失败"):(_this.requestmodel=!0,_this.infomsg="请求发送失败");case 12:case"end":return s.stop()}},s,t)}))()},adddrug:function(e){for(var t=this,s=this,i=!0,r=0;r<this.form.outs.length;r++)this.form.outs[r].drugName==e.ypname&&(i=!1);if(i){var n={drugCode:"",drugName:"",drugSpec:"",firmId:"",units:"",dispensary:"",dispensarySub:"",price:"",amount:"",abidance:"",dosAge:null,dosAgeUnits:"",administretion:"",frequency:"",charges:0,costs:0,orderNo:"1",subOrderNo:"1",freqDetail:"医嘱说明",repetition:1,freq:""};n.drugCode=e.ypcode,n.drugName=e.ypname,n.drugSpec=e.drugspec,n.units=e.unit,n.dispensary=e.storagecode,n.dispensarySub=e.substorage,0===e.ypprice.toString().indexOf(".")?n.price="0"+e.ypprice:n.price=e.ypprice,n.dosAgeUnits="g";var a=e.drugspec,o=e.ypcode,c=s.$store.getters.getUrl+"prescription/specification.do";s.isshowloading=!0,$.ajax({url:c,type:"post",dataType:"json",async:!1,data:{itemcode:o,itemspec:a},success:function(e){s.isshowloading=!1,"0"==e.status?(s.requestmodel=!0,s.infomsg="暂无数据"):"1"==e.status?(n.firmId=e.data[0].firm_id,n.drugSpec=e.data[0].drug_spec+e.data[0].drug_supplier_id):(s.requestmodel=!0,s.infomsg="系统异常")},error:function(e){s.isshowloading=!1,s.requestmodel=!0,s.infomsg="请求发送失败"}}),this.form.outs.push(n);var d=this.form.outs;this.form.outs=[],setTimeout(function(){1===d.length?t.currentindex="0":t.currentindex=d.length-1+"",t.form.outs=d,t.isshowdrugs=!0,t.isshowall=!1,t.currentdrugindex=d.length-1,t.modal1=!1},100)}else if(!this.timestate){this.timestate=!0,this.$Message.warning({content:"该药品已选择，请选择其他药品！",duration:1});var u=setInterval(function(){s.timestate=!1,clearInterval(u)},1100)}},showdrugmodal:function(){this.modal1=!0,this.isfetchdrugs||(this.isshowloading=!0)},init:function(){var e=this;return c()(a.a.mark(function t(){var s,i,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.getpatientinfo(),t.next=3,e.searchDrug();case 3:if("object"==(void 0===(s=t.sent)?"undefined":r()(s))){t.next=6;break}return t.abrupt("return");case 6:return e.searchdrugs=s,t.next=9,e.fetchchannel();case 9:return i=t.sent,e.dealfetchchannel(i),t.next=13,e.fetchfrequency();case 13:n=t.sent,e.dealfetchfrequency(n);case 15:case"end":return t.stop()}},t,e)}))()},dealfetchfrequency:function(e){this.frequency=[{value:"一日一次",label:"一日一次"},{value:"一日二次",label:"一日二次"},{value:"一日三次",label:"一日三次"},{value:"一日四次",label:"一日四次"},{value:"一日五次",label:"一日五次"},{value:"一日六次",label:"一日六次"}]},fetchfrequency:function(){var e=this,t=e.$store.getters.getUrl+"prescription/frequency.do";return new u.a(function(s,i){var r=$.ajax({url:t,type:"post",dataType:"json",timeout:15e3,async:!0,data:"",success:function(e){s(e.data)},error:function(e){i(e)},complete:function(t,s){"timeout"==s&&(r.abort(),e.$Modal.warning({title:"友情提示",content:"请求超时"}))}})})},dealfetchchannel:function(e){this.channel=[];for(var t=0;t<e.length;t++)this.channel.push({value:e[t].pcusename,label:e[t].pcusename})},fetchchannel:function(){var e=this,t=e.$store.getters.getUrl+"prescription/channel.do";return new u.a(function(s,i){var r=$.ajax({url:t,type:"post",dataType:"json",timeout:15e3,async:!0,data:"",success:function(e){s(e.data)},error:function(e){i(e)},complete:function(t,s){"timeout"==s&&(r.abort(),e.$Modal.warning({title:"友情提示",content:"请求超时"}))}})})},dealsearchDrug:function(){var e=this.drugName.toUpperCase(),t=this.searchdrugs;if(this.searchdruglist=[],""!==this.drugName)for(var s=0;s<t.length;s++)if(t[s].hasOwnProperty("ypname")&&"0"!=t[s].inventory){var i=t[s].ypname.toString(),r=t[s].inputcode.toString();(i.includes(e)||r.includes(e))&&this.searchdruglist.push(t[s])}},searchDrug:function(){var e=this,t=e.$store.getters.getUrl+"prescription/chinesemedicine.do",s=void 0;return new u.a(function(i,r){$.ajax({url:t,type:"post",dataType:"json",async:!1,data:"",success:function(t){if(e.isshowloading=!1,e.isfetchdrugs=!0,"1"==t.status){for(var i=[],r=0;r<t.data.length;r++)"0"!==t.data[r].inventory&&i.push(t.data[r]);s=i}else"0"==t.status?(e.requestmodel=!0,e.infomsg="暂无数据",s=1):(e.requestmodel=!0,e.infomsg="系统异常",s=1)},error:function(t){e.isshowloading=!1,e.requestmodel=!0,e.infomsg="系统异常",s=1}}),i(s)})},demo:function(){$(".box").css("display","block")},dealsearchDrugses:function(e){this.drugNamees=e.title,this.procjectid=e.treat_project_id,this.doctorno=e.creator;this.east.administretion=e.pcusename,this.east.frequency=e.pccname;var t=this,s=e.treat_project_id,i=e.creator,r=t.$store.getters.getUrl+"prescription/getChineseMedicine.do",n=t.searchdrugs,a=e.pccname;t.infomsg;var o=$.ajax({url:r,type:"post",dataType:"json",timeout:15e3,async:!0,data:{procjectid:s,doctorno:i},success:function(e){for(var s=[],i=0;i<e.data.length;i++)for(var r=0;r<n.length;r++)if(e.data[i].cdrug_code==n[r].ypcode){var o=n[r];o.dosAge=e.data[i].dosage,o.frequency=a,o.firmId=e.data[i].firm_id,s.push(o)}for(i=0;i<s.length;i++)for(var c=i+1;c<s.length;)s[i].ypcode==s[c].ypcode?s.splice(c,1):c++;for(var d=0;d<s.length;d++)t.adddruges(s[d])},error:function(e){},complete:function(e,s){"timeout"==s&&(o.abort(),t.$Modal.warning({title:"友情提示",content:"请求超时"}))}});this.modal11=!1},adddruges:function(e){for(var t=this,s=!0,i=0;i<this.form.outs.length;i++)this.form.outs[i].drugName==e.ypname&&(s=!1);if(s)if("A"==this.form.orderclass&&this.form.outs.length>=5)this.$Message.info("西药只能开五种药品！");else{var r={drugCode:"",drugName:"",drugSpec:"",firmId:"",units:"",dispensary:"",dispensarySub:"",price:"",amount:"",abidance:"",dosAge:null,dosAgeUnits:"",administretion:"",frequency:"",charges:0,costs:0,orderNo:"1",subOrderNo:"1",freqDetail:"医嘱说明",repetition:1,freq:""};r.drugCode=e.ypcode,r.drugName=e.ypname,r.drugSpec=e.drugspec,r.units=e.unit,r.dosAge=e.dosAge,r.dispensary=e.storagecode,r.dispensarySub=e.substorage,r.frequency=e.frequency,r.firmId=e.firmId,0===e.ypprice.toString().indexOf(".")?r.price="0"+e.ypprice:r.price=e.ypprice;var n=void 0,a=void 0;if("盒"==e.unit){if(-1!=e.drugspec.indexOf("*")){var o=[];o=e.drugspec.split("*");for(var c=0;c<o.length;c++)-1!=o[c].indexOf(e.spec)&&(a=o[c].split(e.spec)[0],r.dedosAgeUnits=a,r.dosAgeUnits=o[c].split(e.spec)[0]+e.spec);n=parseInt(o[1]),r.yppaccount=n}}else if(r.yppaccount=1,-1!=e.drugspec.indexOf("*")){for(var d=e.drugspec.split("*"),u=0;u<d.length;u++)if(-1!=d[u].indexOf(e.spec))if(-1!=d[u].indexOf(":"))for(var l=d[u].split(":"),p=0;p<l.length;p++)-1!=l[p].indexOf(e.spec)&&(r.dedosAgeUnits=l[p].split(e.spec)[0],r.dosAgeUnits=l[p].split(e.spec)[0]+e.spec);else r.dedosAgeUnits=d[u].split(e.spec)[0],r.dosAgeUnits=d[u].split(e.spec)[0]+e.spec}else if(-1!=e.drugspec.indexOf(":"))for(var f=e.drugspec.split(":"),h=0;h<f.length;h++)-1!=f[h].indexOf(e.spec)&&(r.dedosAgeUnits=f[h].split(e.spec)[0],r.dosAgeUnits=f[h].split(e.spec)[0]+e.spec);else r.dedosAgeUnits=e.drugspec.split(e.spec)[0],r.dosAgeUnits=e.drugspec.split(e.spec)[0]+e.spec;this.form.outs.push(r);var m=this.form.outs;this.form.outs=[],1===m.length?this.currentindex="0":this.currentindex=m.length-1+"",this.form.outs=m,this.isshowall=!1,this.currentdrugindex=m.length-1,this.modal1=!1}else if(!this.timestate){this.timestate=!0,this.$Message.warning({content:"该药品已选择，请选择其他药品！",duration:1});var g=setInterval(function(){t.timestate=!1,clearInterval(g)},1100)}},searchCombination:function(){var e=this,t=e.$store.getters.getUrl+"prescription/getMakeUpPrescribe.do",s=JSON.parse(localStorage.getItem("yspatientinfo")),i=(s.registerdept,s.doctor,$.ajax({url:t,type:"post",dataType:"json",timeout:15e3,data:{departcode:"100109",doctorno:"000WGC"},success:function(t){1==t.status&&(e.modal11=!0,e.searchdrugses=t.data)},error:function(e){},complete:function(t,s){"timeout"==s&&(i.abort(),e.$Modal.warning({title:"友情提示",content:"请求超时"}))}}))},getpatientinfo:function(){var e=localStorage.getItem("yspatientinfo"),t=JSON.parse(e);this.form.name=t.name,this.form.cardno=t.patientid,this.form.orderby=t.registerdept,this.form.depname=t.hosdepname,this.form.docname=t.hosdocname,this.form.doccode=t.doctor,this.form.openid=t.openid,this.form.starttime=t.starttime,this.form.visitno=t.visitno,this.form.clinicno=t.clinicno}}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"prescription-page"},[s("div",{staticClass:"rowwrapper"},[e._m(0),e._v(" "),s("Input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),s("div",{staticClass:"rowwrapper"},[e._m(1),e._v(" "),s("Input",{attrs:{disabled:""},model:{value:e.form.cardno,callback:function(t){e.$set(e.form,"cardno",t)},expression:"form.cardno"}})],1),e._v(" "),s("div",{staticClass:"rowwrapper"},[e._m(2),e._v(" "),s("Input",{attrs:{disabled:""},model:{value:e.form.depname,callback:function(t){e.$set(e.form,"depname",t)},expression:"form.depname"}})],1),e._v(" "),s("div",{staticClass:"rowwrapper"},[e._m(3),e._v(" "),s("Input",{attrs:{disabled:""},model:{value:e.form.docname,callback:function(t){e.$set(e.form,"docname",t)},expression:"form.docname"}})],1),e._v(" "),s("div",{staticClass:"rowwrapper"},[e._m(4),e._v(" "),s("Input",{attrs:{disabled:""},model:{value:e.form.orderclass,callback:function(t){e.$set(e.form,"orderclass",t)},expression:"form.orderclass"}})],1),e._v(" "),s("div",{staticClass:"add-btn",on:{click:e.showdrugmodal}},[e._v("\n        请添加药品\n    ")]),e._v(" "),s("div",{staticClass:"add-btn",on:{click:e.searchCombination}},[e._v("\n        请添加组合\n    ")]),e._v(" "),void 0==e.form.outs||e.form.outs.length<=0?s("div",{staticClass:"drug-tip"},[s("div",[e._v("\n            请添加药品\n        ")])]):e._e(),e._v(" "),void 0!==e.form.outs&&e.form.outs.length>0?s("div",[e._l(e.form.outs,function(t,i){return s("div",{key:i,staticClass:"rowwrapper"},[s("div",{staticClass:"drugname"},[e._v("\n                "+e._s(t.drugName)+"  \n            ")]),e._v(" "),s("div",{staticClass:"detaile",on:{click:function(t){return e.editdrugdetail(i)}}},[e._v("\n                详情\n            ")]),e._v(" "),s("div",{staticClass:"detaile",on:{click:function(t){return e.isdeletitem(i)}}},[e._v("\n                删除\n            ")])])}),e._v(" "),s("div",[s("div",{staticClass:"drug-item-info"},[s("div",{staticClass:"drug-fun"},[s("span",{staticClass:"lititle"},[e._v("\n                    用法：\n                ")]),e._v(" "),s("Select",{attrs:{"label-in-value":""},model:{value:e.east.administretion,callback:function(t){e.$set(e.east,"administretion",t)},expression:"east.administretion"}},e._l(e.channel,function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1),e._v(" "),s("span",{staticClass:"unit"},[e._v("\n                    "+e._s("")+"\n                ")])],1)]),e._v(" "),s("div",{staticClass:"drug-item-info"},[s("div",{staticClass:"drug-fun"},[e._m(5),e._v(" "),s("Select",{attrs:{"label-in-value":""},model:{value:e.east.frequency,callback:function(t){e.$set(e.east,"frequency",t)},expression:"east.frequency"}},e._l(e.frequency,function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1),e._v(" "),s("span",{staticClass:"unit"},[e._v("\n                    "+e._s("")+"\n                ")])],1)]),e._v(" "),s("div",{staticClass:"drug-item-info"},[s("div",{staticClass:"drug-fun"},[e._m(6),e._v(" "),s("Select",{attrs:{"label-in-value":""},model:{value:e.east.freq,callback:function(t){e.$set(e.east,"freq",t)},expression:"east.freq"}},e._l(e.frequency,function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1),e._v(" "),s("span",{staticClass:"unit"},[e._v("\n                    "+e._s("")+"\n                ")])],1)]),e._v(" "),s("div",{staticClass:"drug-item-info"},[s("div",{staticClass:"drug-fun"},[s("span",{staticClass:"lititle"},[e._v("\n                    剂数：\n                ")]),e._v(" "),s("Input",{attrs:{type:"number"},on:{"on-blur":function(t){return t.preventDefault(),e.inputLoseFocus(t)}},model:{value:e.east.repetition,callback:function(t){e.$set(e.east,"repetition",t)},expression:"east.repetition"}}),e._v(" "),s("span",{staticClass:"unit"},[e._v("\n                    剂\n                ")])],1)])]),e._v(" "),s("div",[s("div",{staticClass:"primarybtn",style:{opacity:e.opacity},on:{touchstart:e.touchstart,touchend:e.touchend,click:e.toinsertprescribe}},[e._v("提交")])])],2):e._e(),e._v(" "),s("Modal",{attrs:{fullscreen:"",title:"药品详情"},model:{value:e.isshowdrugs,callback:function(t){e.isshowdrugs=t},expression:"isshowdrugs"}},e._l(e.form.outs,function(t,i){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.currentdrugindex==i||e.isshowall,expression:"currentdrugindex==index||isshowall"}],key:i},[s("div",{staticClass:"drug-item",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"drugName"},[e._v(e._s(t.drugName)+"\n                ")]),e._v(" "),s("div",{staticClass:"drugSpec"},[e._v("规格："+e._s(t.drugSpec))]),e._v(" "),s("div",{staticClass:"drug-item-info"},[s("div",{staticClass:"drug-fun"},[s("span",{staticClass:"lititle"},[e._v("\n                            每次用量：\n                        ")]),e._v(" "),s("Input",{attrs:{type:"number"},model:{value:t.dosAge,callback:function(s){e.$set(t,"dosAge",s)},expression:"item.dosAge"}}),e._v(" "),s("span",{staticClass:"unit"},[e._v("\n                            "+e._s(t.dosAgeUnits)+"\n                        ")])],1)]),e._v(" "),s("div",{staticClass:"drug-item-info"},[s("div",{staticClass:"drug-fun"},[s("span",{staticClass:"lititle"},[e._v("\n                            单价：\n                        ")]),e._v(" "),s("Input",{attrs:{type:"text",disabled:""},model:{value:t.price,callback:function(s){e.$set(t,"price",s)},expression:"item.price"}}),e._v(" "),s("span",{staticClass:"unit"},[e._v("\n                            元\n                        ")])],1)])])])}),0),e._v(" "),s("Modal",{attrs:{fullscreen:"",title:"选择药品"},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[s("div",{staticClass:"search-box-wrapper"},[s("div",{staticClass:"search-box"},[s("Input",{on:{"on-change":e.dealsearchDrug},model:{value:e.drugName,callback:function(t){e.drugName=t},expression:"drugName"}})],1),e._v(" "),void 0!==e.searchdruglist||e.searchdruglist.length>0?s("div",{staticClass:"search-yplist"},e._l(e.searchdruglist,function(t,i){return s("div",{key:i},[s("div",{staticClass:"search-ypnameitem ",on:{click:function(s){return e.adddrug(t)}}},[s("div",{staticClass:"ypname"},[e._v(e._s(t.ypname))]),e._v(" "),s("div",{staticClass:"ypinventory"},[e._v(e._s(t.inventory))])])])}),0):e._e(),e._v(" "),void 0===e.searchdruglist||e.searchdruglist.length<=0?s("div",{staticClass:"search-tip"},[e._v("\n                没有搜索到该药品\n            ")]):e._e()])]),e._v(" "),s("Modal",{attrs:{fullscreen:"",title:"选择药品组合"},model:{value:e.modal11,callback:function(t){e.modal11=t},expression:"modal11"}},[s("div",{staticClass:"search-box-wrapper"},[s("div",{staticClass:"search-box",on:{click:function(t){return e.demo()}}},[s("Input",{attrs:{disabled:"",placeholder:"选择药品组合"},model:{value:e.drugNamees,callback:function(t){e.drugNamees=t},expression:"drugNamees"}})],1),e._v(" "),void 0!==e.searchdrugses||e.searchdrugses.length>0?s("div",{staticClass:"search-yplist box"},e._l(e.searchdrugses,function(t,i){return s("div",{key:i},[s("div",{staticClass:"search-ypnameitem ",on:{click:function(s){return e.dealsearchDrugses(t)}}},[s("div",{staticClass:"ypname"},[e._v(e._s(t.title))])])])}),0):e._e(),e._v(" "),void 0===e.searchdrugses||e.searchdrugses.length<=0?s("div",{staticClass:"search-tip"},[e._v("\n                没有搜索到该药品\n            ")]):e._e()])]),e._v(" "),s("Modal",{attrs:{title:"提示"},on:{"on-ok":e.deletoutsitem},model:{value:e.isshowtip,callback:function(t){e.isshowtip=t},expression:"isshowtip"}},[e._v("\n        请确认是否删除该药品！\n    ")]),e._v(" "),s("Modal",{attrs:{title:"提示"},on:{"on-ok":e.insertprescribe},model:{value:e.isinsertprescribe,callback:function(t){e.isinsertprescribe=t},expression:"isinsertprescribe"}},[e._v("\n        请确认是否提交\n    ")]),e._v(" "),s("Modal",{attrs:{title:"提示"},model:{value:e.requestmodel,callback:function(t){e.requestmodel=t},expression:"requestmodel"}},[e._v("\n        "+e._s(e.infomsg)+"\n    ")]),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.isshowloading,expression:"isshowloading"}],staticClass:"loading"})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"info-title"},[t("span",[this._v("患者姓名:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"info-title"},[t("span",[this._v("患者卡号:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"info-title"},[t("span",[this._v("就诊科室:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"info-title"},[t("span",[this._v("就诊医生:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"info-title"},[t("span",[this._v("医嘱类别:")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"lititle"},[t("span",[this._v("\n                        频次：\n                    ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"lititle"},[t("span",[this._v("\n                        服用次数：\n                    ")])])}]};var v=s("VU/8")(m,g,!1,function(e){s("tLa1")},"data-v-d1e4ece2",null);t.default=v.exports},tLa1:function(e,t){}});