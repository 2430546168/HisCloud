webpackJsonp([50],{Yp6j:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("bOdI"),a=s.n(i),o=s("mvHQ"),n=s.n(o),r=s("T4ej"),l=s("uGJ5"),c=a()({components:{loading:r.a},methods:{tobackdetail:function(){this.$router.push("/doctorckeck")}},data:function(){return{itemmodal:!1,itemdrug:{},isshow:!0,delitem:null,delindex:0,tipmodal:!1,errormsg:"",erromodal:!1,checklist:[]}},created:function(){var t=this;setTimeout(function(){t.fetchdruglist();var e=t.$store.getters.getUrl+"SweepCode.do";Object(l.a)(e)},10)}},"methods",{tobackdetail:function(){this.$router.push("/doctorckeck")},showmodal:function(t){this.itemdrug=t,this.itemmodal=!0},newdate:function(){var t=new Date,e=t.getFullYear(),s=t.getMonth()+1,i=t.getDate();return s<10&&(s="0"+s),i<10&&(i="0"+i),e+"-"+s+"-"+i},isdelet:function(t,e){this.delitem=t.items[0],this.delindex=e,this.tipmodal=!0},delet:function(){var t=this,e=JSON.parse(localStorage.getItem("yspatientinfo")),s=this.delitem.itemclass,i=e.patientid,a=this.newdate(),o=e.visitno,r=this.delitem.serialno,l=e.hosdocname,c=e.doctor,d=e.clinicno,m=t.$store.getters.getUrl+"prescription/delPrescribing.do";t.isshow=!0;var u={orderclass:s,cardno:i,visitdate:a,visitno:o,serialno:r,doctor:l,doctorno:c,clinicno:d},v=$.ajax({url:m,type:"post",dataType:"json",timeout:15e3,async:!0,contentType:"application/json",data:n()(u),success:function(e){t.isshow=!1,1==e.status?(t.$Message.info("撤销成功！"),t.checklist.splice(t.delindex,1)):(t.errormsg="数据撤销失败！",t.erromodal=!0)},error:function(e){t.isshow=!1,t.errormsg="撤销药方请求发送失败!",t.erromodal=!0},complete:function(e,s){"timeout"==s&&(v.abort(),t.$Modal.warning({title:"友情提示",content:"请求超时"}))}})},dealdrugresult:function(t){for(var e=[],s=0;s<t.length;s++){e.includes(t[s].serialno)||e.push(t[s].serialno)}for(var i=[],a=0;a<e.length;a++)i.push({serialno:e[a],items:[]});for(var o=0;o<t.length;o++){i[e.indexOf(t[o].serialno)].items.push(t[o])}this.checklist=i},fetchdruglist:function(){var t=this,e=t.$store.getters.getUrl+"prescription/getBeforeOneDrugNoPay.do",s=JSON.parse(localStorage.getItem("yspatientinfo")),i=s.registerdept,a=s.doctor,o=s.patientid;t.isshow=!0;var n=$.ajax({url:e,type:"post",dataType:"json",timeout:15e3,async:!0,data:{cardno:o,doctorno:a,orderedby:i},success:function(e){t.isshow=!1,"1"==e.status?t.dealdrugresult(e.data):"0"!=e.status&&(t.errormsg="查询未交费药品处方订单失败!",t.erromodal=!0)},error:function(e){t.isshow=!1,t.errormsg="请求发送失败!",t.erromodal=!0},complete:function(e,s){"timeout"==s&&(n.abort(),t.$Modal.warning({title:"友情提示",content:"请求超时"}))}})}}),d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"doctorckeckdrug"},[s("div",{staticClass:"title"},[s("div",{staticClass:"arrow-icon",on:{click:t.tobackdetail}},[s("Icon",{attrs:{size:"30",type:"ios-arrow-back"}})],1),t._v("\n    药品信息\n  ")]),t._v(" "),0==t.checklist.length?s("div",{staticClass:"tipinfo"},[t._v("\n      暂无数据\n  ")]):t._e(),t._v(" "),t.checklist.length>0?s("div",t._l(t.checklist,function(e,i){return s("div",{key:i,staticClass:"items"},[t._l(e.items,function(e,i){return s("div",{key:i},[s("div",{staticClass:"item"},[s("div",{staticClass:"itemname"},[t._v("项目名称")]),t._v(" "),s("div",{staticStyle:{"text-align":"left",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v(t._s(e.drugname))])]),t._v(" "),s("div",{staticClass:"item"},[s("div",{staticClass:"itemname"},[t._v("费用")]),t._v(" "),s("div",[t._v(t._s(e.costs)+"元")])]),t._v(" "),s("div",{staticClass:"item"},[s("div",{staticClass:"itemname"},[t._v("详情")]),t._v(" "),s("div",{staticStyle:{color:"rgb(87,197,247)"},on:{click:function(s){return t.showmodal(e)}}},[t._v("详情")])])])}),t._v(" "),s("div",{staticClass:"btn"},[s("div",{on:{click:function(s){return t.isdelet(e,i)}}},[t._v("撤销")])])],2)}),0):t._e(),t._v(" "),s("Modal",{attrs:{title:"药品详情",fullscreen:""},model:{value:t.itemmodal,callback:function(e){t.itemmodal=e},expression:"itemmodal"}},[s("div",{staticClass:"itemmodal"},[s("p",[s("span",{staticClass:"name"},[t._v("用法:")]),s("span",[t._v(t._s(t.itemdrug.administration))])]),t._v(" "),s("p",[s("span",{staticClass:"name"},[t._v("包装:")]),s("span",[t._v(t._s(t.itemdrug.drugspec))])]),t._v(" "),s("p",[s("span",{staticClass:"name"},[t._v("每次用量:")]),s("span",[t._v(t._s(t.itemdrug.dosage)+t._s(t.itemdrug.units))])]),t._v(" "),s("p",[s("span",{staticClass:"name"},[t._v("频次:")]),t._v(" "),s("span",[t._v(t._s(t.itemdrug.frequency))])]),t._v(" "),s("p",[s("span",{staticClass:"name"},[t._v("处方类型:")]),s("span",[t._v(t._s("A"==t.itemdrug.itemclass?"西药":"中药"))])]),t._v(" "),s("p",[s("span",{staticClass:"name"},[t._v("用药天数:")]),s("span",[t._v(t._s(t.itemdrug.abidance))])]),t._v(" "),s("p",[s("span",{staticClass:"name"},[t._v("费用:")]),s("span",[t._v(t._s(t.itemdrug.costs))])]),t._v(" "),s("p",[s("span",{staticClass:"name"},[t._v("数量:")]),s("span",[t._v(t._s(t.itemdrug.amount))])])])]),t._v(" "),s("Modal",{attrs:{title:"提示"},model:{value:t.erromodal,callback:function(e){t.erromodal=e},expression:"erromodal"}},[s("p",[t._v(t._s(t.errormsg))])]),t._v(" "),s("Modal",{attrs:{title:"提示"},on:{"on-ok":function(e){return t.delet()}},model:{value:t.tipmodal,callback:function(e){t.tipmodal=e},expression:"tipmodal"}},[s("p",[t._v("是否撤销此订单？")])]),t._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"load"})],1)},staticRenderFns:[]};var m=s("VU/8")(c,d,!1,function(t){s("mFNF")},"data-v-549e79bb",null);e.default=m.exports},mFNF:function(t,e){}});