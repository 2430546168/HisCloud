webpackJsonp([73],{QjQM:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("pFYg"),n=s.n(a),l=s("Xxa5"),i=s.n(l),o=s("exGp"),c=s.n(o),r=s("T4ej"),u=s("//Fk"),v=s.n(u),h=function(e){return new v.a(function(t,s){$.ajax({url:e,type:"post",dataType:"json",async:!0,data:{},success:function(e){console.log(e),t(e)},error:function(e){s(e)}})})},d=function(e,t){return new v.a(function(s,a){$.ajax({url:t,type:"post",dataType:"json",async:!0,data:e,success:function(e){s(e)},error:function(e){a(e)}})})},x={data:function(){return{isshowloading:!1,radio:"",time:"",timelist:[{value:"出院前评估",label:"出院前评估"},{value:"产后7天评估",label:"产后7天评估"},{value:"产后14天评估",label:"产后14天评估"},{value:"产后28天,42天评估",label:"产后28天,42天评估"}],itemname:"",textname:"",checkAllGroup:[],result:"",itemslist:[{value:"重症急救",label:"重症急救"},{value:"疾病治疗",label:"疾病治疗"},{value:"损伤康复",label:"损伤康复"},{value:"功能保健",label:"功能保健"},{value:"保健预防",label:"保健预防"}],currentHandlers:[],currentAssessContextsList:[],currentAss:[],inititem:{},isinititem:{},_excel:[],indexExcel:[]}},components:{loading:r.a},methods:{tobackdetail:function(){history.go(-1)},selectAssTime:function(e){this.radio="出院前评估"==e?"leavHosBefPg":"产后7天评估"==e?"leavHosBefPg":"产后14天评估"==e?"chailAftFourteen":"chailAftTwentyEight"},changeoption:function(e){this.radio="";this._excel.findIndex(function(t){return t.itemname==e});var t=this;this._excel.forEach(function(s){s.itemName==e&&(t.inititem=s,t.currentHandlers=[],s.handlers.forEach(function(e){t.currentHandlers.push({value:e.handlerContext,label:e.handlerContext})}))}),this.checkAllGroup=[],this.result="",this.textname=""},changeCheckboxGroup:function(e){var t=this;t.currentAssessContextsList=[],console.log(this.inititem.evals),this.inititem.evals.forEach(function(s){e.indexOf(s.evalContext)>-1&&t.currentAssessContextsList.push({name:s.evalContext,ass:s.assessContexts})})},objDuplicateRemoval:function(e,t,s){var a=["evalContext","handlerContext"][s],n=!0;return e.forEach(function(e){e[a]==t[a]&&(n=!1)}),!!n},addAssessContexts:function(e){var t=this.indexExcel,s=this;e.forEach(function(e){for(var a=t.indexOf(e.itemCode),n=0;n<s._excel[a].evals.length;n++)s._excel[a].evals[n].evalCode==e.evalCode&&(s._excel[a].evals[n].hasOwnProperty("assessContexts")?(s._excel[a].evals[n].assessContexts.leavHosBefPg.push(e.leavHosBefPg),s._excel[a].evals[n].assessContexts.chailAftFourteen.push(e.chailAftFourteen),s._excel[a].evals[n].assessContexts.chailAftTwentyEight.push(e.chailAftTwentyEight),s._excel[a].evals[n].assessContexts.chailAftSenven.push(e.chailAftSenven)):(s._excel[a].evals[n].assessContexts={},s._excel[a].evals[n].assessContexts.leavHosBefPg=[],s._excel[a].evals[n].assessContexts.chailAftFourteen=[],s._excel[a].evals[n].assessContexts.chailAftTwentyEight=[],s._excel[a].evals[n].assessContexts.chailAftSenven=[],s._excel[a].evals[n].assessContexts.leavHosBefPg.push(e.leavHosBefPg),s._excel[a].evals[n].assessContexts.chailAftFourteen.push(e.chailAftFourteen),s._excel[a].evals[n].assessContexts.chailAftTwentyEight.push(e.chailAftTwentyEight),s._excel[a].evals[n].assessContexts.chailAftSenven.push(e.chailAftSenven)))})},addHandlers:function(e){var t=this.indexExcel,s=this;e.forEach(function(e){var a=t.indexOf(e.itemCode);s._excel[a].handlers.length>0?s.objDuplicateRemoval(s._excel[a].handlers,e,1)&&s._excel[a].handlers.push(e):s._excel[a].handlers.push(e)})},addEvals:function(e){var t=this.indexExcel,s=this;e.forEach(function(e){var a=t.indexOf(e.itemCode);s._excel[a].evals.length>0?s.objDuplicateRemoval(s._excel[a].evals,e,0)&&s._excel[a].evals.push(e):s._excel[a].evals.push(e)})},getItems:function(e){var t=e.items;this._excel=[],this.itemslist=[];for(var s=0;s<t.length;s++)this._excel.push({itemName:t[s].itemName,itemCode:t[s].itemCode,evals:[],handlers:[]}),this.indexExcel.push(t[s].itemCode),this.itemslist.push({value:t[s].itemName,label:t[s].itemName})},getEvaluateContent:function(){var e=this;return c()(i.a.mark(function t(){var s,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isshowloading=!0,s=e.$store.getters.getUrl+"DoctorAfterChildbirthEval/items.do",a=void 0,t.prev=3,t.next=6,h(s);case 6:a=t.sent,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),console.log(t.t0),e.isshowloading=!1;case 13:e.getItems(a),e.addEvals(a.eval),e.addHandlers(a.handlers),e.addAssessContexts(a.assessContexts),e.isshowloading=!1,console.log(e._excel);case 19:case"end":return t.stop()}},t,e,[[3,9]])}))()},submit:function(){var e=this;return c()(i.a.mark(function t(){var s,a,l,o,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(s=e.$store.getters.getUrl+"DoctorAfterChildbirthEval/addDoctorEval.do",a="",e.currentAssessContextsList,console.log(n()(e.time)),console.log("出院前评估"==e.time),l={itemName:e.itemname,evalContext:e.checkAllGroup,handlerContext:e.textname,leavHosBefPg:"",chailAftSeven:"",chailAftFourteen:"",chailAftTwentyEight:"",doctorCode:456,cardno:123},o="",o="出院前评估"==e.time?"leavHosBefPg":"产后7天评估"==e.time?"chailAftSeven":"产后14天评估"==e.time?"chailAftFourteen":"chailAftTwentyEight",c=0;c<e.currentAssessContextsList.length;c++)console.log(e.currentAssessContextsList),a+=e.currentAssessContextsList[c].result+",";return l[o]=a.slice(0,a.length-1),t.next=12,d(l,s);case 12:t.sent,e.$router.push("/doctorckeck"),console.log(l);case 15:case"end":return t.stop()}},t,e)}))()}},created:function(){this.getEvaluateContent()}},f={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"recure"},[s("div",{staticClass:"header-title"},[e._v("\n      产后评估\n      "),s("div",{staticClass:"arrow-icon",on:{click:e.tobackdetail}},[s("Icon",{attrs:{size:"30",type:"ios-arrow-back"}})],1)]),e._v(" "),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"title"},[e._v("项目名称")]),e._v(" "),s("div",{staticClass:"contaniner"},[s("Select",{on:{"on-change":e.changeoption},model:{value:e.itemname,callback:function(t){e.itemname=t},expression:"itemname"}},e._l(e.itemslist,function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)]),e._v(" "),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"title"},[e._v("评估内容")]),e._v(" "),s("div",{staticClass:"contaniner"},[s("CheckboxGroup",{on:{"on-change":e.changeCheckboxGroup},model:{value:e.checkAllGroup,callback:function(t){e.checkAllGroup=t},expression:"checkAllGroup"}},e._l(e.inititem.evals,function(e,t){return s("Checkbox",{key:t,staticStyle:{display:"block"},attrs:{label:e.evalContext}})}),1)],1)]),e._v(" "),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"title"},[e._v("主管医生处理原则")]),e._v(" "),s("div",{staticClass:"contaniner"},[s("Select",{attrs:{multiple:""},model:{value:e.textname,callback:function(t){e.textname=t},expression:"textname"}},e._l(e.currentHandlers,function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)]),e._v(" "),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"title"},[e._v("选择评估时间")]),e._v(" "),s("div",{staticClass:"contaniner"},[s("Select",{on:{"on-change":e.selectAssTime},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}},e._l(e.timelist,function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1)]),e._v(" "),s("div",{staticClass:"wrapper"},[""!=e.radio?s("div",{staticClass:"contaniner"},e._l(e.currentAssessContextsList,function(t,a){return s("div",{key:a,staticClass:"pinggu"},[s("div",{staticClass:"itemname"},[s("div",[e._v(e._s(t.name))])]),e._v(" "),s("RadioGroup",{staticClass:"radiogroup",model:{value:t.result,callback:function(s){e.$set(t,"result",s)},expression:"item.result"}},e._l(t.ass[e.radio],function(e,t){return s("Radio",{key:t,staticClass:"radio",attrs:{label:e}})}),1)],1)}),0):e._e()]),e._v(" "),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"btnwrapper"},[s("div",{staticClass:"btn",on:{click:e.submit}},[e._v("提交评估")])])]),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.isshowloading,expression:"isshowloading"}]})],1)},staticRenderFns:[]};var m=s("VU/8")(x,f,!1,function(e){s("bYu8")},"data-v-1d6e2f64",null);t.default=m.exports},bYu8:function(e,t){}});