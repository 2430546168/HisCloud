webpackJsonp([72],{AW9l:function(t,e){},vRNW:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("//Fk"),a=s.n(i),n=s("+n8h"),o=s("HywI"),l=s("T4ej"),r=s("uGJ5"),c=new Date;c.getFullYear();if(c.getMonth()+1<10)c.getMonth();else c.getMonth();if(c.getDate()<10)c.getDate();else c.getDate();var u={components:{tabbar:n.a,pullRefresh:o.a,loading:l.a},data:function(){return{ecipeList:[],drugList:[],value3:"0",cardno:[],model1:"",cityList:[],cardlist:[],modal11:!1,value1:"",isshowloading:!1,model2:"",mod1:!1,mod2:!1,mod3:!1,assaysList:[],examList:[],drug:[],size:10,num:0}},methods:{tobackdetail:function(){this.$router.push("/Myaccount")},formatDate:function(t){var e=t.getFullYear();if(t.getMonth()+1<10)var s="0"+(t.getMonth()+1);else s=t.getMonth()+1;if(t.getDate()<10)var i="0"+t.getDate();else i=t.getDate();t.getHours(),t.getMinutes(),t.getSeconds();return e+"-"+s+"-"+i},testMoney:function(t){for(var e=0,s=this.ecipeList[t].test,i=0;i<s.length;i++)e+=parseFloat(s[i].charges);return e.toFixed(2)},modal3:function(t){this.mod3=!0,this.assaysList=this.ecipeList[t].test},incisionTime:function(t){return/\d{4}-\d{1,2}-\d{1,2}/g.exec(t)[0]},incisionTimess:function(t){return/\d{4}-\d{1,2}/g.exec(t)[0]},datatime:function(t){var e=t,s=this.p(e.getFullYear()),i=this.p(e.getMonth()+1);this.p(e.getDate());return s+"-"+i},p:function(t){return t<10?"0"+t:t},refresh:function(){var t=this;return new a.a(function(e,s){setTimeout(function(){t.GetRecipeList(),e()},2e3)})},datatrans:function(t){var e=new Date(t),s=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),n=e.getHours(),o=e.getMinutes();i<10&&(i="0"+i),a<10&&(a="0"+a),n<10&&(n="0"+n),o<10&&(o="0"+o);var l=s+"-"+i+"-"+a+"- "+n+":"+o;return"NaN-NaN-NaN- NaN:NaN"!==l?l:""},selectcard:function(t){this.assayssList(t)},qingkong:function(){""!=this.value1&&null!=this.value1&&(this.value1="",this.assayssList())},shaixuan:function(){null==this.value1?(this.value1="",this.size=10):this.value1=this.datatime(this.value1),this.assayssList()},assayssList:function(){var t=this,e=t.$store.getters.getUrl+"prescription/getCheckOrChemical.do",s=localStorage.getItem("cardno"),i=t.value1,a=t.size;t.isshowloading=!0;var n=$.ajax({url:e,type:"post",dataType:"json",timeout:15e3,data:{cardno:s,billdate:i,itemtype:"C",type:"month",doccode:"",size:a},success:function(e){t.ecipeList=[],t.isshowloading=!1;for(var s=0;s<e.data.length;s++)t.ecipeList.push(e.data[s]);for(var i=t.ecipeList,a=[],n=0;n<i.length;n++)a.push(i[n].visitno);for(var o=[],l=0;l<a.length;l++)if(0==o.length)o.push(a[0]);else{var r=a[l];-1==o.indexOf(r)&&o.push(r)}for(var c=[],u=0;u<o.length;u++)c.push({visitno:o[u],subarr:[]});for(var v=0;v<i.length;v++){c[o.indexOf(i[v].visitno)].subarr.push(i[v])}for(var p=0;p<c.length;p++)c[p].test=[];for(var d=0;d<c.length;d++)for(var h=0;h<c[d].subarr.length;h++)"C"==c[d].subarr[h].itemclass&&c[d].test.push(c[d].subarr[h]);c.length<7&&t.num!==c.length&&(t.num=c.length,t.size+=15,t.assayssList()),c.length>=7?(c.splice(c.length-1,1),t.ecipeList=c):t.ecipeList=c},error:function(t){},complete:function(e,s){"timeout"==s&&(n.abort(),t.$Modal.warning({title:"友情提示",content:"请求超时"}))}})}},mounted:function(){var t=this;this.isshowloading=!0;var e=document.querySelector(".MyExamine"),s=e.offsetHeight;setInterval(function(){e.onscroll=function(){var i=e.scrollTop,a=e.scrollHeight;s+i-a>=-1&&(t.size+=5,t.assayssList())}},1e3),this.assayssList();var i=t.$store.getters.getUrl+"SweepCode.do";Object(r.a)(i)}},v={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"MyExamine"},[s("div",{staticClass:"titlei"},[s("div",{staticClass:"title"},[s("div",{staticClass:"arrow-icon",on:{click:t.tobackdetail}},[s("Icon",{attrs:{size:"30",type:"ios-arrow-back"}})],1),t._v("化验处方")]),t._v(" "),s("div",{staticClass:"xuanze",staticStyle:{position:"relative"}},[s("div",{staticStyle:{display:"inline-block",width:"100%"}},[s("span",{staticStyle:{color:"rgb(40, 184, 161)","font-size":"20px"},on:{click:t.qingkong}},[t._v("全部化验")]),t._v(" "),s("el-date-picker",{staticStyle:{width:"30%",border:"0",position:"absolute",right:"5%",top:"7px"},attrs:{type:"month",placeholder:"选择月份",editable:!1,clearable:!0,size:"small"},on:{change:t.shaixuan},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1)])]),t._v(" "),s("div",{staticClass:"content"},[0==t.ecipeList.length?s("div",{staticClass:"ecipeList",staticStyle:{"text-align":"center","font-size":"18px",margin:"20% 0"}},[t._v(" \n          暂无数据\n        ")]):t._e(),t._v(" "),0!==t.ecipeList.length?s("div",{staticClass:"ecipeList"},[t._l(t.ecipeList,function(e,i){return s("div",{key:i,staticClass:"xiang"},[0!=e.test.length?s("div",{staticClass:"examList",staticStyle:{padding:"10px","border-bottom":"1px solid #ccc"}},[t._m(0,!0),t._v(" "),s("p",[s("span",[t._v("就诊序号：")]),s("span",[t._v(t._s(e.test[0].visitno))])]),t._v(" "),s("p",[s("span",[t._v("生成时间：")]),s("span",[t._v(t._s(t.formatDate(new Date(e.test[0].visitdate))))])]),t._v(" "),s("p",[s("span",[t._v("项目详情：")]),s("span",{staticStyle:{color:"blue"},on:{click:function(e){return t.modal3(i)}}},[t._v("查看>")])]),t._v(" "),s("p",[s("span",[t._v("合计金额：")]),s("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v("￥"+t._s(t.testMoney(i)))])]),t._v(" "),s("Modal",{attrs:{fullscreen:"",title:"项目详情"},model:{value:t.mod3,callback:function(e){t.mod3=e},expression:"mod3"}},t._l(t.assaysList,function(e,i){return s("div",{key:i,staticClass:"ecipeList",staticStyle:{"font-size":"16px","border-bottom":"1px solid #ccc",padding:"10px 0","font-weight":"650"}},[s("div",{staticStyle:{"text-align":"center","font-size":"18px",padding:"10px 0"}},[t._v(t._s(e.itemname))]),t._v(" "),s("p",[s("span",[t._v("编码：")]),s("span",[t._v(t._s(e.itemcode))])]),t._v(" "),s("p",[s("span",[t._v("数量：")]),s("span",[t._v(t._s(e.amount))])]),t._v(" "),s("p",[s("span",[t._v("单价：")]),s("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v("￥"+t._s(e.charges))])]),t._v(" "),s("p",[s("span",[t._v("规格：")]),s("span",[t._v(t._s(e.itemspec))])]),t._v(" "),s("p",[s("span",[t._v("单位：")]),s("span",[t._v(t._s(e.units))])])])}),0)],1):t._e()])}),t._v(" "),0==t.ecipeList[0].test.length?s("div",{},[s("p",{staticStyle:{"font-size":"18px",margin:"20% 0","text-align":"center"}},[t._v("暂无数据")])]):t._e()],2):t._e()]),t._v(" "),s("tabbar",{staticClass:"tabbar"}),t._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:t.isshowloading,expression:"isshowloading"}],staticClass:"loading"})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("span",[this._v("处方类型：")]),e("span",[this._v("化验处方")])])}]};var p=s("VU/8")(u,v,!1,function(t){s("AW9l")},"data-v-25c4e800",null);e.default=p.exports}});